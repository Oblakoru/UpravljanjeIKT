<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Page</title>
</head>
<body>
    <h2>Welcome, {{ username }}!</h2>
    <p>This is the Admin page content.</p>

    <h3>Submitted Forms</h3>

    {% if forms %}
        <table border="1">
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Name</th>
                <th>Surname</th>
                <th>Street</th>
                <th>Country</th>
                <th>Status</th>
                <th>Actions</th>
                <th>PDF</th>
            </tr>
            {% for form in forms %}
                <tr>
                    <td>{{ form[0] }}</td>
                    <td>{{ form[1] }}</td>
                    <td>{{ form[2] }}</td>
                    <td>{{ form[3] }}</td>
                    <td>{{ form[4] }}</td>
                    <td>{{ form[5] }}</td>
                    <td>{{ form[6] }}</td>
                    <td>
                        <form method="post" action="{{ url_for('update_status', form_id=form[0], new_status='accepted') }}">
                            <button type="submit">Accept</button>
                        </form>
                        <form method="post" action="{{ url_for('update_status', form_id=form[0], new_status='rejected') }}">
                            <button type="submit">Reject</button>
                        </form>
                    </td>
                    <td>
                        {% if form[6] == 'accepted' %}
                            <!-- Check if the status is 'accepted' before showing the button -->
                            {% if form[7] %}
                                <!-- Check if the PDF exists -->
                                <form method="get" action="{{ url_for('view_pdf', username=form[1]) }}" target="_blank">
                                    <button type="submit">View PDF</button>
                                </form>
                            {% else %}
                                <!-- Display a message if the PDF does not exist -->
                                No PDF available
                            {% endif %}
                        {% else %}
                            <!-- If the status is not 'accepted', display a message or an empty cell -->
                            No PDF available
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No forms available.</p>
    {% endif %}

    <a href="{{ url_for('logout') }}">Logout</a>
</body>
</html>
